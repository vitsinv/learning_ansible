<h1> Домашнее задание к занятию "11.02 Микросервисы: принципы" </h1>

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

<h2> Задача 1: API Gateway </h2>

> Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.
> 
> Решение должно соответствовать следующим требованиям:
> - Маршрутизация запросов к нужному сервису на основе конфигурации
> - Возможность проверки аутентификационной информации в запросах
> - Обеспечение терминации HTTPS
> 
> Обоснуйте свой выбор.


| Решение | Маршрутизация | Аутентификация | Терминация HTTPS | Бесплатно/Открыто? |
|---|---|---|---|---|
| Kong | + | + | + | Открыто, Apache 2.0 |
| Apache APISIX | + | + | + | Открыто, Apache 2.0 |
| Amazon AWS API Gateway | + | + | - | Платно |
| Azure API Gateway | + | + | + | Платно |
| NGINX Plus | + | + | + | Платно |
| KrakenD | + | + | + | Условно бесплатен, необходимый функционал стоит денег|

Если брать в расчет функционал, то все средства хороши. Единственный нюанс доставляет AWS Gateway, так как требует хотя бы самоподписанный сертификат SSL. То ли не умееет в терминацию, то ли излишнеен секьюрен.

По количеству применений лидирует Kongo, под капотом которого, широко рапространенный NGINX, что упрощает поддержку. Ввииду распространенности, в наличии обилие документаци и специалистов. Выбор редакции

<h2> Задача 2: Брокер сообщений </h2>

> Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.
> 
> Решение должно соответствовать следующим требованиям:
> - Поддержка кластеризации для обеспечения надежности
> - Хранение сообщений на диске в процессе доставки
> - Высокая скорость работы
> - Поддержка различных форматов сообщений
> - Разделение прав доступа к различным потокам сообщений
> - Простота эксплуатации
> 
> Обоснуйте свой выбор.

| Параметр | RabbitMQ | Apache Kafka | ActiveMQ | NATS | Redis |
|:---|:---:|:---:|:---:|:---:|:---:|
| Поддержка кластеризации | + | + | + | + | + |
| Хранение сообщений на диске в процессе доставки | + | + | + | + | + |
| Высокая скорость работы | +/- | + | - | + | + |
| Поддержка различных форматов сообщений | AMQP, MQTT, STOMP | binary через TCP Socket | 10 форматов, включая AMQP, AUTO, MQTT, REST | Только NATS Streaming Protocol | Только RESP |
| Дифферинцированнй доступ к потокам сообщений | + | + | + | + | + |
| Простота эксплуатации | + | - | + | + | + |

И вновь не хватает конкретики.

- Какие задачи будет выполнять брокер, какая нагрузка?
- Не всегда большая компания == большая нагрузка именно на это приложение.
- Насколько необходимо поддерживать множество форматов?
И прочее...

Одднако, если следовать букве задания, выбор должен остановаиться на ActiveMQ, при прочих равных, который, поддерживает большую часть форматов сообщений.

